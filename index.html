<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrossCraft ‚Äî Hub de Minecraft: Skins, Servidor y M√°s</title>
    <meta name="description" content="CrossCraft es tu hub definitivo para Minecraft: skins exclusivas, curiosidades, informaci√≥n de nuestro servidor 'NACI√ìN DE FACTOS' y enlace a nuestra comunidad de Discord.">
    <meta name="keywords" content="Minecraft, Skins, Servidor Minecraft, NACI√ìN DE FACTOS, Curiosidades, Discord, CrossCraft, Hub">
    <link rel="canonical" href="[URL_DEL_HOSTING_AQUI]">
    <meta property="og:title" content="CrossCraft ‚Äî Hub de Minecraft">
    <meta property="og:description" content="Tu centro de skins, curiosidades y comunidad para Minecraft. √önete a NACI√ìN DE FACTOS y a nuestro Discord.">
    <meta property="og:image" content="[URL_DE_IMAGEN_HERO_OG_AQUI]">
    <meta property="og:url" content="[URL_DEL_HOSTING_AQUI]">
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Favicon and touch icon (usar recurso externo proporcionado por el usuario) -->
    <link rel="icon" type="image/png" href="https://media.istockphoto.com/vectors/texture-for-platformers-pixel-art-vector-ground-mud-block-vector-id488848400?k=20&m=488848400&s=170667a&w=0&h=DYk6LVNGb2cuXWTAdsYMl6ByjqmP1uprGTZzA1SRsXw=">
    <link rel="apple-touch-icon" href="https://media.istockphoto.com/vectors/texture-for-platformers-pixel-art-vector-ground-mud-block-vector-id488848400?k=20&m=488848400&s=170667a&w=0&h=DYk6LVNGb2cuXWTAdsYMl6ByjqmP1uprGTZzA1SRsXw=">
    <meta name="theme-color" content="#0b1220">

    <style>
        /* ===== CSS COMPLETO ===== */

        /* Variables y Reset B√°sico */
        :root {
            --color-black-main: #040406;
            --color-black-card: #0f0f14;
            --color-blue-accent: #3b82f6; /* azul */
            --color-blue-light: #60a5fa;
            --color-blue-shadow: rgba(59,130,246,0.18);
            --color-purple: #6b21a8; /* morado */
            --color-purple-light: #8b5cf6;
            --color-text-light: #e0e0e0;
            --color-text-muted: #a0a0a0;
            --container-max-width: 1200px;
            --transition-duration: 0.3s;
            --shadow-subtle: 0 4px 6px rgba(0, 0, 0, 0.4);
            --shadow-blue-soft: 0 0 12px var(--color-blue-shadow), 0 0 6px var(--color-blue-shadow);
            --border-radius: 12px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--color-black-main);
            color: var(--color-text-light);
            line-height: 1.6;
        }

        a {
            color: var(--color-blue-accent);
            text-decoration: none;
            transition: color var(--transition-duration);
            outline: none;
        }

        a:hover, a:focus-visible {
            color: var(--color-blue-light);
            outline: 2px solid var(--color-blue-accent);
            outline-offset: 2px;
        }

        /* Utilidades y Contenedor */
        .container {
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .section-heading {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            text-align: center;
            margin-bottom: 2.5rem;
            color: var(--color-blue-accent);
            text-shadow: 0 0 5px var(--color-blue-shadow);
        }

        /* Botones Base */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-duration) ease-out;
            box-shadow: var(--shadow-subtle);
            text-align: center;
            font-size: 1rem;
            gap: 0.5rem;
            outline: none;
            white-space: nowrap;
        }

        .btn:focus-visible {
            outline: 2px solid var(--color-blue-accent);
            outline-offset: 2px;
        }

        .btn-primary {
            background-color: var(--color-blue-accent);
            color: white;
            border: 2px solid var(--color-blue-accent);
        }

        .btn-primary:hover, .btn-primary:focus-visible {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px var(--color-blue-shadow);
            background-color: var(--color-blue-light);
        }

        .btn-secondary {
            background-color: var(--color-black-card);
            color: var(--color-blue-accent);
            border: 1px solid var(--color-blue-accent);
        }

        .btn-secondary:hover, .btn-secondary:focus-visible {
            background-color: var(--color-blue-accent);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px var(--color-blue-shadow);
        }
        
        .loading {
            position: relative;
            overflow: hidden;
        }
        
        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* ===== Fondo renovado (gradiente animado + part√≠culas sutiles) ===== */
        .animated-bg {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
            background: linear-gradient(135deg, #020204 0%, var(--color-purple) 30%, var(--color-blue-accent) 70%, #001024 100%);
            background-size: 300% 300%;
            transition: background-position 1s ease;
            will-change: background-position;
            filter: saturate(1.02) contrast(1.02);
        }

        .animated-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                              radial-gradient(rgba(255,255,255,0.01) 1px, transparent 1px);
            background-size: 40px 40px, 80px 80px;
            opacity: 0.6;
            mix-blend-mode: screen;
            filter: blur(2px) saturate(120%);
            transform: translateZ(0);
            pointer-events: none;
        }

        .animated-bg::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 10% 10%, rgba(139,92,246,0.06), transparent 8%),
                        radial-gradient(circle at 80% 80%, rgba(59,130,246,0.05), transparent 12%);
            filter: blur(28px) contrast(110%);
            opacity: 0.95;
            pointer-events: none;
        }

        @keyframes bgShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* opcional: animaci√≥n lenta del gradiente */
        .animated-bg.animate {
            animation: bgShift 20s ease-in-out infinite;
        }

        /* Mantener compatibilidad con elementos previamente a√±adidos (burbujas), no obligatorias */
        .bg-bubble { display: none; }

        /* ===== Efectos para Cr√©ditos ===== */
        .credits-card {
            overflow: visible;
            isolation: isolate;
            transition: transform 0.45s ease, box-shadow 0.45s ease;
            background-image: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
        }

        .credits-card::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: calc(var(--border-radius) + 2px);
            padding: 2px;
            background: linear-gradient(90deg, rgba(139,92,246,0.12), rgba(59,130,246,0.06), rgba(139,92,246,0.12));
            -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            mask-composite: exclude;
            pointer-events: none;
            filter: blur(8px);
            z-index: -1;
            animation: border-shift 6s linear infinite;
        }

        @keyframes border-shift {
            0% { transform: translateX(-5%); }
            50% { transform: translateX(5%); }
            100% { transform: translateX(-5%); }
        }

        .credits-card:hover {
            transform: translateY(-6px) scale(1.01);
            box-shadow: 0 18px 40px rgba(43,108,176,0.12), 0 6px 18px rgba(0,0,0,0.6);
        }

        .credits-effects {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 0;
            border-radius: inherit;
            overflow: hidden;
        }

        .credits-effects::after {
            content: '';
            position: absolute;
            width: 140%;
            height: 140%;
            left: -20%;
            top: -50%;
            background: radial-gradient(circle at 30% 30%, rgba(66,153,225,0.06), transparent 20%), radial-gradient(circle at 70% 70%, rgba(66,153,225,0.04), transparent 25%);
            filter: blur(28px) saturate(120%);
            animation: slow-rotate 12s linear infinite;
            opacity: 0.9;
        }

        @keyframes slow-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .credits-avatar {
            position: relative;
            z-index: 1;
            transition: transform 0.45s ease, box-shadow 0.45s ease;
        }

        .credits-avatar:hover {
            transform: scale(1.07) rotate(-4deg);
            box-shadow: 0 8px 30px rgba(66,153,225,0.18), 0 4px 12px rgba(0,0,0,0.6);
        }

        .credits-name {
            position: relative;
            z-index: 1;
        }

        /* Destellos sutiles en nombre */
        .credits-name::after {
            content: '';
            position: absolute;
            left: -10px;
            top: -8px;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255,255,255,0.9), rgba(66,153,225,0.4));
            border-radius: 50%;
            filter: blur(6px);
            opacity: 0.8;
            animation: twinkle 3s ease-in-out infinite;
            transform-origin: center;
            z-index: 1;
        }

        @keyframes twinkle {
            0% { transform: scale(1); opacity: 0.2; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 0.2; }
        }

        @media (prefers-reduced-motion: reduce) {
            .bg-bubble, .credits-card::before, .credits-effects::after, .credits-name::after { animation: none !important; }
        }

        /* ===== Header / Navbar ===== */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: rgba(7, 7, 7, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-subtle);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-blue-accent);
            text-shadow: 0 0 5px var(--color-blue-shadow);
            display: flex;
            align-items: center;
        }

        .logo-img {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 0.6rem;
            box-shadow: 0 6px 14px rgba(0,0,0,0.6), 0 0 8px rgba(66,153,225,0.05) inset;
            display: inline-block;
        }

        .logo-icon {
            font-size: 1.8rem;
            margin-right: 0.5rem;
            display: none; /* ocultamos emoji cuando usamos imagen */
        }

        .logo-text {
            display: inline-block;
        }

        /* Imagen del Discord en la card (fondo para mejor contraste) */
        .discord-img {
            width: 72px;
            height: 72px;
            object-fit: contain;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 0 10px 28px rgba(0,0,0,0.6);
            background: linear-gradient(135deg, var(--color-purple) 0%, var(--color-blue-accent) 100%);
            padding: 10px; /* espacio alrededor del SVG para contraste */
            border: 1px solid rgba(255,255,255,0.06);
        }

        .nav-menu {
            display: none;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--color-text-light);
            font-weight: 400;
            padding: 0.5rem 0;
            position: relative;
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--color-blue-accent);
            transition: width var(--transition-duration) ease-in-out;
        }

        .nav-menu a:hover::after, .nav-menu a:focus-visible::after {
            width: 100%;
        }

        .hamburger {
            display: block;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--color-blue-accent);
            transition: transform var(--transition-duration);
            background: none;
            border: none;
            padding: 0.25rem;
        }

        .hamburger:focus-visible {
            outline: 2px solid var(--color-blue-accent);
            outline-offset: 2px;
        }

        /* Menu Mobile */
        @media (max-width: 768px) {
            .nav-menu {
                display: flex;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--color-black-main);
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.8);
                padding: 1rem 1.5rem;
                transform: translateY(-100vh);
                opacity: 0;
                pointer-events: none;
                transition: transform var(--transition-duration) ease-in-out, opacity var(--transition-duration);
                gap: 1rem;
            }

            .nav-menu.active {
                transform: translateY(0);
                opacity: 1;
                pointer-events: all;
            }

            .nav-menu a {
                padding: 0.75rem 0;
                border-bottom: 1px solid var(--color-black-card);
                font-size: 1.1rem;
            }

            .hamburger.active {
                transform: rotate(90deg);
            }
            /* Ajustes para pantallas peque√±as: creditos apilados */
            .credits-card {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 1rem;
                gap: 0.75rem;
            }

            .credits-avatar {
                width: 88px;
                height: 88px;
                border-radius: 16px;
                margin-bottom: 0;
            }

            .credits-content { width: 100%; }

            .logo-text { display: inline-block; font-size: 1rem; }
        }

        /* Desktop */
        @media (min-width: 769px) {
            .hamburger {
                display: none;
            }
            .nav-menu {
                display: flex;
                flex-direction: row;
                position: static;
                transform: none;
                opacity: 1;
                pointer-events: all;
                background: none;
                box-shadow: none;
                padding: 0;
            }
            .nav-menu a {
                border-bottom: none;
            }
        }

        /* Mobile-first adjustments */
        @media (max-width: 600px) {
            .hero { padding: 3rem 1rem; min-height: 60vh; }
            .hero-title { font-size: 2rem; }
            .hero-subtitle { font-size: 0.95rem; }

            .logo-img { width: 30px; height: 30px; }
            .logo-text { font-size: 1rem; }

            .curiosity-grid { grid-template-columns: 1fr; }
            .curiosity-card { min-height: auto; padding: 0.9rem; }

            .skins-grid { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.75rem; }

            .modal-content { width: 95%; max-width: 420px; }
            
            /* Mejora del buscador en m√≥viles: input m√°s grande y botones apilados */
            .skin-search-form {
                flex-direction: column;
                gap: 0.5rem;
                align-items: stretch;
            }

            .skin-search-form input[type="text"] {
                font-size: 1.05rem;
                padding: 0.9rem 0.9rem;
                flex: none;
                width: 100%;
            }

            .skin-search-form .btn {
                width: 100%;
            }

            /* En m√≥viles, hacer las insignias y tooltips m√°s f√°ciles de leer */
            .credits-badges { justify-content: center; }
            .badge { width: 44px; height: 44px; border-radius: 10px; font-size: 20px; }
            .badge::after { font-size: 0.95rem; padding: 9px 12px; }
            .badge::before { border-left: 7px solid transparent; border-right: 7px solid transparent; border-top: 7px solid var(--color-purple); }
        }

        @media (min-width: 1200px) {
            .credits-card { max-width: 900px; }
            .curiosity-grid { max-width: 1200px; }
        }

        /* ===== Buscador de Skins ===== */
        .skin-search-form {
            display: inline-flex;
            gap: 0.5rem;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 720px;
        }

        .skin-search-form input[type="text"] {
            padding: 0.6rem 0.75rem;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.06);
            background: rgba(255,255,255,0.02);
            color: var(--color-text-light);
            min-width: 180px;
            flex: 1 1 320px;
            outline: none;
        }

        .skin-search-form input[type="text"]::placeholder {
            color: var(--color-text-muted);
        }

        .skin-result-card img { max-width: 140px; border-radius: 8px; }


        /* ===== Hero Section ===== */
        .hero {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 4rem 1.5rem;
            background: linear-gradient(rgba(7, 7, 7, 0.9), rgba(7, 7, 7, 0.9)), 
                        radial-gradient(circle at 50% 50%, var(--color-blue-shadow) 0%, transparent 40%);
            background-size: cover;
        }

        .hero-content {
            max-width: 800px;
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 700;
            color: var(--color-blue-accent);
            text-shadow: 0 0 10px var(--color-blue-shadow);
            margin-bottom: 1rem;
        }

        /* Texto fancy-gradient para el t√≠tulo principal */
        .fancy-gradient {
            background: linear-gradient(90deg, var(--color-purple), var(--color-blue-accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientShift 6s ease-in-out infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .hero-subtitle {
            font-size: clamp(1rem, 2vw, 1.25rem);
            color: var(--color-text-light);
            margin-bottom: 2rem;
        }

        /* ===== Secciones Generales (Animaci√≥n) ===== */
        .section {
            padding: 4rem 0;
        }

        .animated-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease-out, transform 1s ease-out;
            will-change: opacity, transform;
        }

        .animated-section.in-view {
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== Skins Section ===== */
        .skins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .skin-card {
            background-color: var(--color-black-card);
            border-radius: var(--border-radius);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            box-shadow: var(--shadow-subtle);
            transition: transform var(--transition-duration), box-shadow var(--transition-duration);
            border: 1px solid transparent;
        }

        .skin-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6), var(--shadow-blue-soft);
            border-color: var(--color-blue-accent);
        }

        .skin-card img {
            width: 100%;
            max-width: 120px;
            height: auto;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            filter: drop-shadow(0 0 5px rgba(43, 108, 176, 0.3));
        }

        .skin-meta {
            font-size: 0.75rem;
            color: var(--color-blue-accent);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .skin-card-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1rem;
            width: 100%;
        }

        .skin-card-actions .btn {
            flex-grow: 1;
            padding: 0.5rem 0.75rem;
            font-size: 0.85rem;
            width: 100%;
        }
        
        .refresh-btn-container {
            text-align: center;
            margin-top: 2rem;
        }

        .refresh-btn {
            background-color: var(--color-black-card);
            border: 1px solid var(--color-blue-accent);
            color: var(--color-blue-accent);
            animation: pulse 2s infinite ease-in-out;
        }
        
        .refresh-btn:hover {
            animation: none;
            background-color: var(--color-blue-accent);
            color: white;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(43, 108, 176, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(43, 108, 176, 0); }
            100% { box-shadow: 0 0 0 0 rgba(43, 108, 176, 0); }
        }

        /* ===== Modal de Previsualizaci√≥n ===== */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity var(--transition-duration);
        }

        .modal-backdrop.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--color-black-card);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            max-width: 90%;
            width: 400px;
            box-shadow: var(--shadow-blue-soft);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transform: scale(0.9);
            transition: transform var(--transition-duration) ease-out;
            border: 2px solid var(--color-blue-accent);
        }

        .modal-backdrop.active .modal-content {
            transform: scale(1);
        }

        .modal-content img {
            max-width: 320px;
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            filter: drop-shadow(0 0 10px rgba(43, 108, 176, 0.5));
        }

        /* Controles del visor 3D dentro de la modal */
        .viewer-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .viewer-controls select.btn {
            padding: 0.55rem 0.65rem;
            background: rgba(255,255,255,0.03);
            color: var(--color-text-light);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.04);
        }

        .viewer-controls .btn {
            padding: 0.45rem 0.8rem;
            font-size: 0.9rem;
        }

        /* Estilos para el Quiz */
        .quiz-card {
            background-color: var(--color-black-card);
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: var(--shadow-subtle);
            border: 1px solid rgba(255,255,255,0.02);
        }

        .quiz-question { color: var(--color-text-light); }

        .quiz-answers .answer-btn {
            padding: 0.65rem 0.75rem;
            border-radius: 8px;
            background: rgba(255,255,255,0.02);
            color: var(--color-text-light);
            border: 1px solid rgba(255,255,255,0.03);
            cursor: pointer;
            font-weight:600;
        }

        .quiz-answers .answer-btn.correct { background: linear-gradient(90deg, rgba(72,187,120,0.18), rgba(72,187,120,0.08)); border-color: rgba(72,187,120,0.25); }
        .quiz-answers .answer-btn.wrong { background: linear-gradient(90deg, rgba(224,80,80,0.12), rgba(224,80,80,0.06)); border-color: rgba(224,80,80,0.18); }

        .quiz-timer { font-weight:600; }

        .badge-earned {
            animation: glow-pulse 1.6s ease-in-out 2;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-blue-accent);
            margin-bottom: 1.5rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            width: 100%;
            justify-content: center;
        }

        .modal-actions .btn {
            flex-grow: 1;
            max-width: 150px;
        }
        
        .skin-viewer-container {
            width: 100%;
            max-width: 320px;
            height: 400px;
            margin-bottom: 1.5rem;
        }

        /* ===== Datos Curiosos Section ===== */
        .curiosity-panel {
            background-color: var(--color-black-card);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 700px;
            margin: 2rem auto;
            text-align: center;
            box-shadow: var(--shadow-subtle);
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--color-black-card);
        }

        /* Nueva grid de curiosidades */
        .curiosity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .curiosity-card {
            background-color: var(--color-black-card);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: left;
            box-shadow: var(--shadow-subtle);
            min-height: 110px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255,255,255,0.02);
        }

        .curiosity-card .curiosity-text {
            font-size: 1rem;
            font-weight: 400;
            margin: 0;
            color: var(--color-text-light);
        }

        .curiosity-text {
            font-size: 1.25rem;
            font-weight: 300;
            margin-bottom: 1.5rem;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-out;
            opacity: 1;
            transform: translateY(0);
        }

        .curiosity-text.fade-out {
            opacity: 0;
            transform: translateY(-10px);
        }
        
        .curiosity-text.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== Servidor Status Section ===== */
        .server-status-card {
            background-color: var(--color-black-card);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 800px;
            margin: 2rem auto;
            box-shadow: var(--shadow-blue-soft);
            border: 2px solid var(--color-blue-accent);
        }

        .server-title {
            font-size: 1.8rem;
            color: var(--color-blue-accent);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .server-data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .server-data-item {
            padding: 1rem;
            background-color: #1a1a1a;
            border-radius: 8px;
            text-align: center;
        }

        .server-data-label {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            font-weight: 300;
        }

        .server-data-value {
            font-size: 1.2rem;
            font-weight: 600;
            margin-top: 0.25rem;
            color: var(--color-text-light);
        }

        .status-online { color: limegreen; }
        .status-offline { color: red; }

        .server-ip-info {
            text-align: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: #1a1a1a;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .server-ip-info p {
            margin: 0;
        }
        
        .server-ip-info strong {
            color: var(--color-blue-accent);
            word-break: break-all;
        }
        
        .server-motd {
            text-align: center;
            margin-bottom: 1.5rem;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--color-text-muted);
            white-space: pre-wrap;
            min-height: 20px;
            padding: 1rem;
            background-color: #1a1a1a;
            border-radius: 8px;
        }

        .server-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .server-actions .btn {
            flex-grow: 1;
        }
        
        .server-actions .btn-full {
            flex-grow: 1;
            max-width: 100%;
        }

        @media (min-width: 768px) {
            .server-actions .btn {
                flex-grow: 0;
            }
            
            .server-ip-info {
                flex-direction: row;
                justify-content: space-around;
            }
        }

        /* ===== Discord Section ===== */
        .discord-card {
            background-color: var(--color-black-card);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 600px;
            margin: 2rem auto;
            text-align: center;
            box-shadow: var(--shadow-subtle);
            border: 1px solid var(--color-black-card);
        }
        
        .discord-title {
            font-size: 1.5rem;
            color: var(--color-blue-accent);
            margin-bottom: 1rem;
        }

        .discord-icon {
            font-size: 4rem;
            color: #5865F2;
            margin-bottom: 1rem;
        }

        .discord-stats {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            color: var(--color-text-light);
        }

        .discord-stats strong {
            color: var(--color-blue-accent);
            font-weight: 600;
        }
        
        /* ===== Cr√©ditos Section ===== */
        .credits-card {
            background: linear-gradient(180deg, rgba(19,19,19,0.95), rgba(15,15,15,0.9));
            border-radius: calc(var(--border-radius) + 8px);
            padding: 1.25rem;
            max-width: 760px;
            margin: 2rem auto;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.7);
            border: 1px solid rgba(66,153,225,0.12);
            position: relative;
            overflow: visible;
        }

        .credits-avatar {
            width: 96px;
            height: 96px;
            border-radius: 22px; /* Estilo tipo app (esquinas redondeadas) */
            object-fit: cover;
            flex: 0 0 96px;
            border: 3px solid rgba(255,255,255,0.04);
            box-shadow: 0 8px 20px rgba(0,0,0,0.6), 0 0 18px rgba(66,153,225,0.06) inset;
            background-color: #0e0e0e;
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }

        .credits-avatar:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 14px 36px rgba(0,0,0,0.7), 0 0 28px rgba(66,153,225,0.08) inset;
        }

        .credits-content {
            flex: 1;
            z-index: 1;
        }

        .credits-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--color-text-light);
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .credits-role {
            font-size: 0.95rem;
            color: var(--color-blue-accent);
            font-weight: 600;
        }

        .credits-text {
            color: var(--color-text-muted);
            margin-top: 0.4rem;
            font-size: 0.95rem;
        }

        /* Badges / Insignias en Cr√©ditos */
        .credits-badges {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.35rem;
            align-items: center;
            z-index: 1;
        }

        .badge {
            display: inline-grid;
            place-items: center;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(255,255,255,0.06);
            color: white;
            font-size: 18px;
            cursor: default;
            position: relative;
            box-shadow: 0 6px 14px rgba(0,0,0,0.6);
            transition: transform 0.18s ease, background 0.18s ease, box-shadow 0.18s ease;
            border: 1px solid rgba(255,255,255,0.02);
        }

        /* Hover / focus: m√°s contraste y sombra para que la insignia destaque */
        .badge:focus, .badge:hover {
            transform: translateY(-4px) scale(1.06);
            background: linear-gradient(180deg, rgba(66,153,225,0.26), rgba(66,153,225,0.12));
            outline: none;
            box-shadow: 0 10px 28px rgba(66,153,225,0.14), 0 6px 18px rgba(0,0,0,0.6);
            color: #ffffff;
            border: 1px solid rgba(255,255,255,0.06);
        }

        /* Tooltip CSS usando data-badge: m√°s visible (morado-azul elegante) */
        .badge::after {
            content: attr(data-badge);
            position: absolute;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%) translateY(8px);
            background: linear-gradient(180deg, var(--color-purple), var(--color-blue-accent));
            color: #ffffff;
            padding: 8px 10px;
            border-radius: 6px;
            font-size: 0.86rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease, transform 0.15s ease;
            box-shadow: 0 10px 26px rgba(75,0,130,0.32);
            z-index: 40;
        }

        /* Arrow for the tooltip */
        .badge::before {
            content: '';
            position: absolute;
            bottom: calc(100% + 4px);
            left: 50%;
            transform: translateX(-50%) translateY(8px);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid var(--color-blue-accent);
            opacity: 0;
            transition: opacity 0.15s ease, transform 0.15s ease;
            z-index: 39;
        }

        .badge:focus::after, .badge:hover::after, .badge.show-tooltip::after {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .badge:focus::before, .badge:hover::before, .badge.show-tooltip::before {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Destellos / sparkles sutiles dentro de la tarjeta */
        .sparkles {
            position: absolute;
            right: 8%;
            top: 10%;
            width: 160px;
            height: 160px;
            pointer-events: none;
            z-index: 0;
            background-image: radial-gradient(circle at 20% 30%, rgba(255,255,255,0.06) 0 6px, transparent 7px),
                              radial-gradient(circle at 70% 70%, rgba(66,153,225,0.03) 0 8px, transparent 9px);
            filter: blur(8px) saturate(120%);
            transform: translateZ(0);
            animation: spark-move 8s linear infinite;
            opacity: 0.95;
        }

        @keyframes spark-move {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.95; }
            50% { transform: translateY(-6px) rotate(8deg); opacity: 0.6; }
            100% { transform: translateY(0) rotate(0deg); opacity: 0.95; }
        }

        @keyframes glow-pulse {
            0%, 100% { text-shadow: 0 0 5px var(--color-blue-accent); }
            50% { text-shadow: 0 0 10px var(--color-blue-accent), 0 0 15px var(--color-blue-shadow); }
        }

        /* ===== Toast Notification ===== */
        .toast-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3000;
            display: none;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background-color: var(--color-black-card);
            color: var(--color-text-light);
            padding: 0.75rem 1.25rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            border-left: 5px solid var(--color-blue-accent);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== Footer ===== */
        .footer {
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 3rem;
            border-top: 1px solid #1a1a1a;
            font-size: 0.9rem;
            color: var(--color-text-muted);
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            html {
                scroll-behavior: auto;
            }
        }

    </style>
</head>
<body>

    <!-- Fondo animado con burbujas (solo CSS) -->
    <div class="animated-bg" aria-hidden="true">
        <span class="bg-bubble" style="--i:12;"></span>
        <span class="bg-bubble" style="--i:16;"></span>
        <span class="bg-bubble" style="--i:10;"></span>
        <span class="bg-bubble" style="--i:20;"></span>
        <span class="bg-bubble" style="--i:14;"></span>
        <span class="bg-bubble" style="--i:18;"></span>
        <span class="bg-bubble" style="--i:22;"></span>
        <span class="bg-bubble" style="--i:9;"></span>
    </div>

    <header class="header" role="banner">
        <div class="navbar container">
            <a href="#hero" class="logo" aria-label="CrossCraft - Inicio">
                <img src="https://media.istockphoto.com/vectors/texture-for-platformers-pixel-art-vector-ground-mud-block-vector-id488848400?k=20&m=488848400&s=170667a&w=0&h=DYk6LVNGb2cuXWTAdsYMl6ByjqmP1uprGTZzA1SRsXw=" alt="CrossCraft logo" class="logo-img" loading="lazy" width="36" height="36">
                <span class="logo-text">CrossCraft</span>
            </a>
            <nav aria-label="Navegaci√≥n principal">
                <ul class="nav-menu" id="navMenu" role="menubar">
                    <li role="none"><a href="#skins" role="menuitem">Skins</a></li>
                    <li role="none"><a href="#curiosidades" role="menuitem">Curiosidades</a></li>
                    <li role="none"><a href="#servidor" role="menuitem">Servidor</a></li>
                    <li role="none"><a href="#discord" role="menuitem">Discord</a></li>
                    <li role="none"><a href="#creditos" role="menuitem">Cr√©ditos</a></li>
                </ul>
            </nav>
            <button class="hamburger" id="hamburger" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="navMenu">&#9776;</button>
        </div>
    </header>

    <main>
        <section id="hero" class="hero section" aria-labelledby="hero-title">
            <div class="hero-content">
                <h1 id="hero-title" class="hero-title fancy-gradient">CrossCraft Minecraft Hub</h1>
                <p class="hero-subtitle">Tu centro de informaci√≥n premium para la comunidad de Minecraft. ¬°Explora las mejores skins, datos curiosos y √∫nete a nuestro servidor!</p>
            </div>
        </section>

  

        <!-- ===== Quiz de Minecraft ===== -->
        <section id="quiz" class="section animated-section" data-animation-offset="100" aria-labelledby="quiz-heading">
            <div class="container">
                <h2 id="quiz-heading" class="section-heading">Quiz de Minecraft üéì</h2>

                <div class="quiz-card" id="quizCard" style="max-width:720px; margin:0 auto;">
                    <p id="quizIntro" class="curiosity-text" style="text-align:center;">Pon a prueba tus conocimientos de Minecraft. Completa 5 preguntas y gana una insignia si aciertas al menos 4.</p>

                    <div id="quizPlayArea" style="display:flex; flex-direction:column; gap:0.75rem;">
                        <div id="quizQuestion" class="quiz-question" style="font-weight:600; font-size:1.05rem;">Preparado?</div>
                        <div id="quizAnswers" class="quiz-answers" style="display:grid; grid-template-columns:1fr 1fr; gap:0.5rem;"></div>

                        <div style="display:flex; justify-content:space-between; align-items:center; gap:0.75rem;">
                            <div id="quizTimer" class="quiz-timer" style="color:var(--color-text-muted);">Tiempo: --</div>
                            <div id="quizProgress" class="quiz-progress" style="color:var(--color-text-muted);">Pregunta 0/0</div>
                        </div>

                        <div style="display:flex; gap:0.5rem; justify-content:center; margin-top:0.5rem;">
                            <button id="quizStartBtn" class="btn btn-primary">Empezar Quiz</button>
                            <button id="quizNextBtn" class="btn btn-secondary" style="display:none;">Siguiente</button>
                        </div>

                        <div id="quizResult" style="display:none; text-align:center; margin-top:0.75rem;"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="skins" class="section animated-section" data-animation-offset="100" aria-labelledby="skins-heading">
            <div class="container">
                <h2 id="skins-heading" class="section-heading">Skins Exclusivas üé®</h2>
                <div class="refresh-btn-container" style="text-align:center; margin-bottom:1.25rem;">
                    <button id="refreshSkinsBtn" class="btn btn-secondary refresh-btn" aria-label="Refrescar lista de skins">
                        <span class="icon" aria-hidden="true">üîÑ</span> Refrescar Skins
                    </button>
                </div>
                <div class="skin-search" style="text-align:center; margin-bottom:1rem;">
                    <form id="skinSearchForm" class="skin-search-form" onsubmit="return false;">
                        <input id="skinSearchInput" type="text" placeholder="Buscar skin por nombre (ej. Notch)" aria-label="Buscar skin">
                        <button id="skinSearchBtn" class="btn btn-primary" aria-label="Buscar skin">Buscar</button>
                        <button id="skinClearBtn" class="btn btn-secondary" type="button" aria-label="Limpiar b√∫squeda">Limpiar</button>
                    </form>
                </div>

                <div class="skins-grid" id="skinsGrid">
                    <div class="skin-card loading" aria-live="polite">
                        <p style="color:var(--color-text-muted);">Cargando skins...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="curiosidades" class="section animated-section" data-animation-offset="100" aria-labelledby="curiosidades-heading">
            <div class="container">
                <h2 id="curiosidades-heading" class="section-heading">Datos Curiosos de Minecraft üí°</h2>

                <div class="curiosity-controls" style="text-align:center; margin-bottom:1rem;">
                    <button id="showMoreCuriosityBtn" class="btn btn-secondary" aria-label="Refrescar datos curiosos">
                        <span class="icon" aria-hidden="true">‚ú®</span> Mostrar nuevos
                    </button>
                </div>

                <div class="curiosity-grid" id="curiosityGrid">
                    <div class="curiosity-card curiosity-loading">
                        <p class="curiosity-text">Cargando...</p>
                    </div>
                    <div class="curiosity-card curiosity-loading">
                        <p class="curiosity-text">Cargando...</p>
                    </div>
                    <div class="curiosity-card curiosity-loading">
                        <p class="curiosity-text">Cargando...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="servidor" class="section animated-section" data-animation-offset="100" aria-labelledby="servidor-heading">
            <div class="container">
                <h2 id="servidor-heading" class="section-heading">Servidor ‚Äî NACI√ìN DE FACTOS üõ°Ô∏è</h2>

                <div class="server-status-card">
                    <h3 class="server-title">NACI√ìN DE FACTOS ‚Äî ¬°√önete Ahora!</h3>
                    
                    <div class="server-ip-info">
                        <p><strong>IP Java:</strong> <span id="javaIp">51.81.49.204:26347</span></p>
                        <p><strong>Host Bedrock:</strong> <span id="bedrockHost">va5.holy.gg:26347</span></p>
                    </div>
                    
                    <div class="server-data-grid">
                        <div class="server-data-item">
                            <p class="server-data-label">Estado</p>
                            <p class="server-data-value" id="serverStatus"><span class="status-offline">Cargando...</span></p>
                        </div>
                        <div class="server-data-item">
                            <p class="server-data-label">Jugadores</p>
                            <p class="server-data-value" id="serverPlayers">--/--</p>
                        </div>
                        <div class="server-data-item">
                            <p class="server-data-label">Ping</p>
                            <p class="server-data-value" id="serverPing">-- ms</p>
                        </div>
                        <div class="server-data-item">
                            <p class="server-data-label">Versi√≥n</p>
                            <p class="server-data-value" id="serverVersion">Cargando...</p>
                        </div>
                    </div>

                    <p class="server-motd" id="serverMotd">MOTD: Cargando mensaje del d√≠a...</p>

                    <div class="server-actions">
                        <button id="copyJavaBtn" class="btn btn-secondary" data-copy="51.81.49.204:26347" aria-label="Copiar IP Java al portapapeles">Copiar IP Java</button>
                        <button id="copyBedrockBtn" class="btn btn-secondary" data-copy="va5.holy.gg:26347" aria-label="Copiar Host Bedrock al portapapeles">Copiar Host Bedrock</button>
                        <button id="joinServerBtn" class="btn btn-primary btn-full" aria-label="Unirse al servidor de Minecraft">Unirse Ahora</button>
                        <button id="refreshServerBtn" class="btn btn-secondary" aria-label="Actualizar estado del servidor">Refrescar Estado</button>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="discord" class="section animated-section" data-animation-offset="100" aria-labelledby="discord-heading">
            <div class="container">
                <h2 id="discord-heading" class="section-heading">Discord ‚Äî Fuck se viene la decadencia üí¨</h2>

                <div class="discord-card">
                    <h3 class="discord-title">√önete a nuestra Comunidad</h3>
                    <div class="discord-icon">
                        <img src="https://cdn.worldvectorlogo.com/logos/discord.svg" alt="Discord logo" class="discord-img" loading="lazy" width="72" height="72">
                    </div>
                    
                    <p class="discord-stats" id="discordStats">
                        Cargando estad√≠sticas del servidor...
                    </p>

                    <a id="discordInviteLink" href="https://discord.gg/4qU4DsVCsF" target="_blank" rel="noopener noreferrer" class="btn btn-primary btn-lg" style="margin-top: 1rem;" aria-label="Unirse al servidor de Discord">
                        <span class="icon" aria-hidden="true">üöÄ</span> Unirse al Discord
                    </a>
                </div>
            </div>
        </section>

        <!-- ===== Galer√≠a Comunitaria (moved) ===== -->
        <section id="galeria" class="section animated-section" data-animation-offset="100" aria-labelledby="galeria-heading">
            <div class="container">
                <h2 id="galeria-heading" class="section-heading">Galer√≠a de la Comunidad üéí</h2>

                <div class="quiz-card" style="max-width:880px; margin:0 auto 1rem;">
                    <p style="margin-bottom:0.75rem; color:var(--color-text-muted);">Sube tus capturas relacionadas con Minecraft. Las im√°genes se almacenan en el servidor y pueden ser moderadas por administradores.</p>

                    <form id="uploadForm" style="display:flex; gap:0.5rem; flex-wrap:wrap; align-items:center;" enctype="multipart/form-data">
                        <input id="uploadAuthor" type="text" placeholder="Tu nombre (opcional)" style="flex:1 1 180px; padding:0.5rem; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--color-text-light);">
                        <input id="uploadCaption" type="text" placeholder="Descripci√≥n / caption" style="flex:2 1 320px; padding:0.5rem; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--color-text-light);">
                        <input id="uploadFile" type="file" accept="image/*" aria-label="Subir imagen" style="flex:0 0 220px;">
                        <button id="uploadBtn" class="btn btn-primary" type="button">Subir Imagen</button>
                        <button id="adminToggleBtn" class="btn btn-secondary" type="button" style="margin-left:auto;">Abrir Panel Admin</button>
                    </form>
                </div>

                <div id="galleryGrid" class="curiosity-grid" aria-live="polite">
                    <!-- im√°genes cargadas desde el servidor -->
                </div>
            </div>
        </section>

        <section id="creditos" class="section animated-section" data-animation-offset="100" aria-labelledby="creditos-heading">
            <div class="container">
                <h2 id="creditos-heading" class="section-heading">Cr√©ditos üåü</h2>

                <div class="credits-card" role="group" aria-label="Cr√©ditos del creador">
                    <img src="https://cdn.discordapp.com/avatars/957101336976060467/60b4c474aa77b2cb07167984d3fc9425.webp?size=2048" alt="Logotipo - SoyMr mroks" class="credits-avatar" loading="lazy" width="96" height="96">
                    <div class="credits-content">
                        <div class="credits-name">
                            <span>SoyMr mroks</span>
                        </div>

                        <div class="credits-badges" aria-label="Insignias" role="list">
                            <span class="badge" role="listitem" tabindex="0" aria-label="Fundador" data-badge="Fundador">üèÜ</span>
                            <span class="badge" role="listitem" tabindex="0" aria-label="Administrador" data-badge="Administrador">üõ°Ô∏è</span>
                            <span class="badge" role="listitem" tabindex="0" aria-label="Creador de contenido" data-badge="Creador">‚ú®</span>
                        </div>

                        <p class="credits-text">Creador de CrossCraft, administrador de NACI√ìN DE FACTOS y del Discord. Apoyando la comunidad y gestionando contenido.</p>
                    </div>
                    <span class="sparkles" aria-hidden="true"></span>
                </div>
            </div>
        </section>
        
    </main>
    
    <footer class="footer" role="contentinfo">
        <div class="container">
            <p>&copy; 2025 CrossCraft. Todos los derechos reservados.</p>
            <p style="margin-top:0.5rem; color:var(--color-text-muted);">Esta p√°gina est√° hecha por el amor a la comunidad de Minecraft.</p>
        </div>
    </footer>

    <div id="skinModalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content" id="skinModalContent" role="document" tabindex="-1">
            <h3 id="modalTitle" class="modal-title">Previsualizar Skin</h3>
            
            <div id="skinViewerContainer" class="skin-viewer-container" style="display:none;"></div>
            
            <div id="viewerControls" class="viewer-controls" style="display:none; margin-bottom:0.75rem;">
                <button id="modalRotateToggle" class="btn btn-secondary" aria-pressed="false">Pausar rotaci√≥n</button>
                <button id="modalZoomIn" class="btn btn-secondary" aria-label="Acercar">+</button>
                <button id="modalZoomOut" class="btn btn-secondary" aria-label="Alejar">‚àí</button>
                <select id="modalPresetSelect" class="btn" aria-label="√Ångulo predefinido">
                    <option value="front">Frontal</option>
                    <option value="threequarter">3/4</option>
                    <option value="close">Cercano</option>
                </select>
                <button id="modalCaptureBtn" class="btn btn-primary">Descargar render</button>
            </div>

            <img id="modalSkinImg" src="" alt="Skin en previsualizaci√≥n" loading="lazy" style="display: block;">
            
            <div class="modal-actions">
                <button id="modalDownloadBtn" class="btn btn-primary" aria-label="Descargar skin">Descargar</button>
                <button id="modalCloseBtn" class="btn btn-secondary" aria-label="Cerrar ventana modal">Cerrar (Esc)</button>
            </div>
        </div>
    </div>
    
    <div id="toastContainer" class="toast-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Constantes y Variables ---
            const SKINS_API_BASE = 'https://minotar.net/armor/body/';
            const SKINS_DOWNLOAD_BASE = 'https://mc-heads.net/download/';
            const SERVER_API_URL = 'https://api.mcsrvstat.us/2/51.81.49.204:26347';
            const DISCORD_INVITE_CODE = '4qU4DsVCsF';
            const DISCORD_API_URL = `https://discord.com/api/v9/invites/${DISCORD_INVITE_CODE}?with_counts=true`;
            
            const skinsGrid = document.getElementById('skinsGrid');
            const refreshSkinsBtn = document.getElementById('refreshSkinsBtn');
            const skinSearchForm = document.getElementById('skinSearchForm');
            const skinSearchInput = document.getElementById('skinSearchInput');
            const skinSearchBtn = document.getElementById('skinSearchBtn');
            const skinClearBtn = document.getElementById('skinClearBtn');
            const curiosityText = document.getElementById('curiosityText');
            const showMoreCuriosityBtn = document.getElementById('showMoreCuriosityBtn');
            const refreshServerBtn = document.getElementById('refreshServerBtn');
            const toastContainer = document.getElementById('toastContainer');
            
            let displayedCuriosities = new Set();
            let currentSkinUsername = '';
            
            // Lista local de nombres de usuario para skins
            const SKIN_USERNAMES = [
                'Notch', 'jeb_', 'Herobrine', 'Dinnerbone', 'Technoblade', 'Dream', 'Grian', 
                'MumboJumbo', 'Skeppy', 'GoodTimesWithScar', 'Falsesymmetry', 'xisumavoid', 
                'iJevin', 'Etho', 'TangoTek', 'VintageBeef', 'Docm77', 'Keralis', 
                'BdoubleO100', 'Stressmonster101', 'JoeHills', 'Rendog', 'Welsknight',
                'Cubfan135', 'ImpulseSV', 'Zedaph', 'CaptainSparklez', 'StampyLongnose',
                'ibxtoycat', 'PewDiePie'
            ];

            // Lista local de datos curiosos
            const CURIOSITY_DATA = [
                'El enderman puede teletransportarse y recoger bloques.',
                'Los creepers tienen miedo a los ocelotes y gatos, y huir√°n de ellos.',
                'El bloque de Arena de Almas (Soul Sand) ralentiza el movimiento del jugador.',
                'Un bloque de agua puede ser recogido con un cubo, pero un bloque de lava no puede ser recogido en el Nether.',
                'La flor Wither Rose puede aparecer en el suelo donde una criatura muere a manos de un Wither o un Wither Skeleton.',
                'El Golem de Nieve (Snow Golem) se derretir√° si est√° en un bioma c√°lido o en el Nether/End.',
                'En un d√≠a de Minecraft, el sol sale por el este y se pone por el oeste, pero un d√≠a solo dura 20 minutos de la vida real.',
                'El efecto de poci√≥n de Hambre (Hunger) es infligido por el Pez Globo, que se puede pescar.',
                'Si un rayo impacta en un aldeano, este se convierte en una bruja.',
                'Los caballos y burros pueden ser equipados con armadura y cofres respectivamente.',
                'El pico de diamante es la √∫nica herramienta capaz de minar obsidiana de forma eficiente.',
                'En modo Hardcore, al morir, el mundo se borra o se te obliga a entrar en modo espectador.',
                'La poci√≥n de Leche (Milk) quita todos los efectos de estado, tanto positivos como negativos.',
                'Los ajolotes pueden ser domesticados y ayudan a los jugadores en combate subacu√°tico.',
                'Los piglins son neutrales a menos que el jugador abra un cofre o no lleve ninguna pieza de armadura de oro.',
                'La probabilidad de que un zombie suelte una zanahoria o una patata es muy baja, menos del 2.5%.',
                'El drag√≥n del End tiene 200 puntos de salud (400 si se cuenta la barra de vida).'
            ];
            
            // --- Helper Functions ---
            
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.classList.add('toast', type);
                toast.textContent = message;
                toastContainer.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 10);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, 4000);
                
                if (toastContainer.style.display === 'none' || toastContainer.style.display === '') {
                    toastContainer.style.display = 'flex';
                }
            }
            
            function copyToClipboard(text) {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text).then(() => {
                        showToast('¬°Copiado al portapapeles!', 'success');
                    }).catch(err => {
                        console.error('Error al copiar:', err);
                        showToast('Error al copiar. Copia manualmente: ' + text, 'error');
                    });
                } else {
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        document.execCommand('copy');
                        showToast('¬°Copiado al portapapeles!', 'success');
                    } catch (err) {
                        showToast('Error al copiar (fallback). Copia manualmente: ' + text, 'error');
                    }
                    document.body.removeChild(textarea);
                }
            }
            
            async function fetchWithTimeout(url, options = {}, timeout = 8000) {
                const controller = new AbortController();
                const id = setTimeout(() => controller.abort(), timeout);
                try {
                    const response = await fetch(url, {
                        ...options,
                        signal: controller.signal
                    });
                    clearTimeout(id);
                    return response;
                } catch (error) {
                    clearTimeout(id);
                    if (error.name === 'AbortError') {
                        throw new Error('Timeout: La solicitud tard√≥ demasiado.');
                    }
                    throw error;
                }
            }
            
            // --- Navbar y Men√∫ M√≥vil ---
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('navMenu');

            hamburger.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
                hamburger.setAttribute('aria-expanded', navMenu.classList.contains('active'));
            });
            
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        hamburger.classList.remove('active');
                        hamburger.setAttribute('aria-expanded', 'false');
                    }
                });
            });

            // --- Skins: Generaci√≥n de Cards ---
            
            function getRandomSubset(array, count) {
                const shuffled = [...array].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, Math.min(count, shuffled.length));
            }

            function generateSkinCards() {
                skinsGrid.innerHTML = '';
                const selectedUsernames = getRandomSubset(SKIN_USERNAMES, 12);

                selectedUsernames.forEach((username, index) => {
                    const card = document.createElement('div');
                    card.classList.add('skin-card');
                    
                    const metaText = index < 3 ? 'Skin Popular' : 'Skin Aleatoria';
                    const skinBodyUrl = `${SKINS_API_BASE}${username}/150.png`;

                    card.innerHTML = `
                        <img src="${skinBodyUrl}" alt="Render 2D de la skin de ${username}" loading="lazy" data-username="${username}">
                        <strong>${username}</strong>
                        <p class="skin-meta">${metaText}</p>
                        <div class="skin-card-actions">
                            <button class="btn btn-secondary btn-preview" data-username="${username}" aria-controls="skinModalBackdrop" aria-expanded="false">Previsualizar</button>
                            <button class="btn btn-primary btn-download-card" data-username="${username}">Descargar</button>
                        </div>
                    `;
                    skinsGrid.appendChild(card);
                });
            }

            function showSkinResult(username) {
                if (!username) return showToast('Introduce un nombre de usuario para buscar.', 'warning');
                const u = username.trim();
                if (!u) return showToast('Introduce un nombre v√°lido.', 'warning');

                skinsGrid.innerHTML = '';

                const card = document.createElement('div');
                card.className = 'skin-card skin-result-card';

                const skinImgUrl = `${SKINS_API_BASE}${u}/320.png`;

                card.innerHTML = `
                    <img src="${skinImgUrl}" alt="Skin de ${u}" loading="lazy" data-username="${u}">
                    <strong>${u}</strong>
                    <p class="skin-meta">Resultado de b√∫squeda</p>
                    <div class="skin-card-actions">
                        <button class="btn btn-secondary btn-preview" data-username="${u}" aria-controls="skinModalBackdrop" aria-expanded="false">Previsualizar</button>
                        <button class="btn btn-primary btn-download-card" data-username="${u}">Descargar</button>
                    </div>
                `;

                skinsGrid.appendChild(card);
            }

            // Buscar skin: desde formulario o bot√≥n
            function handleSkinSearch() {
                const val = skinSearchInput.value || '';
                if (!val.trim()) {
                    showToast('Escribe un nombre para buscar la skin.', 'warning');
                    return;
                }
                showSkinResult(val.trim());
            }

            skinSearchBtn.addEventListener('click', (e) => { e.preventDefault(); handleSkinSearch(); });
            skinSearchForm.addEventListener('submit', (e) => { e.preventDefault(); handleSkinSearch(); });
            skinClearBtn.addEventListener('click', (e) => { e.preventDefault(); skinSearchInput.value = ''; generateSkinCards(); });
            
            async function handleDownload(username) {
                const downloadUrl = `https://minotar.net/download/${username}`;
                
                try {
                    const response = await fetch(downloadUrl, { method: 'GET', mode: 'cors' });
                    
                    if (!response.ok) throw new Error('Respuesta de red no OK, usando fallback.');
                    
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = `${username}_skin.png`;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                    a.remove();
                    
                    showToast(`Descarga de ${username} iniciada.`, 'success');
                    
                } catch (error) {
                    console.error('Error en descarga fetch/blob, usando fallback:', error);
                    window.open(`${SKINS_DOWNLOAD_BASE}${username}`, '_blank');
                    showToast(`Descarga de ${username} fall√≥. Abriendo p√°gina de descarga.`, 'warning');
                }
            }
            
            // Delegaci√≥n de eventos para botones de skins
            skinsGrid.addEventListener('click', (e) => {
                const username = e.target.dataset.username;
                if (!username) return;

                if (e.target.classList.contains('btn-download-card')) {
                    handleDownload(username);
                } else if (e.target.classList.contains('btn-preview')) {
                    currentSkinUsername = username;
                    openSkinModal(username, e.target);
                }
            });

            // Bot√≥n Refrescar Skins
            refreshSkinsBtn.addEventListener('click', generateSkinCards);
            
            // --- Modal: L√≥gica ---
            const modalBackdrop = document.getElementById('skinModalBackdrop');
            const modalContent = document.getElementById('skinModalContent');
            const modalSkinImg = document.getElementById('modalSkinImg');
            const modalTitle = document.getElementById('modalTitle');
            const modalCloseBtn = document.getElementById('modalCloseBtn');
            const modalDownloadBtn = document.getElementById('modalDownloadBtn');
            const skinViewerContainer = document.getElementById('skinViewerContainer');
            let focusedElementBeforeModal;
            
            function loadSkinViewer(username) {
                if (window.skinview) {
                    initializeSkinViewer(username);
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://unpkg.com/skinview3d@2.0.7/dist/skinview3d.min.js';
                script.onload = () => initializeSkinViewer(username);
                script.onerror = () => {
                    console.error('Error al cargar skinview3d. Usando imagen 2D.');
                    skinViewerContainer.style.display = 'none';
                    modalSkinImg.style.display = 'block';
                };
                document.head.appendChild(script);
            }
            
            let currentViewer = null;
            let viewerAutoRotate = true;

            function initializeSkinViewer(username) {
                modalSkinImg.style.display = 'none';
                skinViewerContainer.style.display = 'block';

                try {
                    // limpiar contenedor
                    skinViewerContainer.innerHTML = '';

                    const canvas = document.createElement('canvas');
                    let viewer = new window.skinview.SkinViewer({
                        canvas: canvas,
                        width: 320,
                        height: 400,
                        skin: `https://minotar.net/skin/${username}`
                    });

                    viewer.renderer.domElement.style.width = '100%';
                    viewer.renderer.domElement.style.height = '100%';
                    skinViewerContainer.appendChild(viewer.renderer.domElement);

                    viewer.camera.position.set(0, 0, 45);
                    viewer.loadCape(null);

                    // Intentar usar el helper Rotating si est√° disponible
                    try {
                        if (window.skinview && window.skinview.Rotating) {
                            viewer.animation = new window.skinview.Rotating(viewer, { speed: 0.05 });
                            if (typeof viewer.animation.start === 'function') viewer.animation.start();
                            viewerAutoRotate = true;
                        }
                    } catch (rotErr) {
                        console.warn('Rotating helper no disponible o fall√≥:', rotErr);
                    }

                    currentViewer = viewer;

                    // mostrar controles
                    const vc = document.getElementById('viewerControls');
                    if (vc) vc.style.display = 'flex';

                } catch (e) {
                    console.error('Fallo en la inicializaci√≥n de skinview3d:', e);
                    skinViewerContainer.style.display = 'none';
                    modalSkinImg.style.display = 'block';
                }
            }

            function openSkinModal(username, triggerElement) {
                focusedElementBeforeModal = triggerElement;
                
                const skinPreviewUrl = `${SKINS_API_BASE}${username}/320.png`;
                modalSkinImg.src = skinPreviewUrl;
                modalSkinImg.alt = `Skin grande de ${username}`;
                modalTitle.textContent = `Previsualizar Skin: ${username}`;
                
                loadSkinViewer(username);

                modalBackdrop.classList.add('active');
                modalContent.focus();
                triggerElement.setAttribute('aria-expanded', 'true');
            }

            function closeModal(triggerElement = focusedElementBeforeModal) {
                modalBackdrop.classList.remove('active');
                
                // detener animaci√≥n si existe
                try {
                    if (currentViewer && currentViewer.animation && typeof currentViewer.animation.stop === 'function') {
                        currentViewer.animation.stop();
                    }
                } catch (e) { console.warn(e); }

                currentViewer = null;
                skinViewerContainer.innerHTML = '';
                skinViewerContainer.style.display = 'none';
                const vc = document.getElementById('viewerControls'); if (vc) vc.style.display = 'none';
                modalSkinImg.style.display = 'block';
                
                if (triggerElement) {
                    triggerElement.focus();
                    triggerElement.setAttribute('aria-expanded', 'false');
                }
            }
            
            modalCloseBtn.addEventListener('click', () => closeModal());
            modalDownloadBtn.addEventListener('click', () => {
                handleDownload(currentSkinUsername);
            });

            // Controles adicionales del viewer
            const modalRotateToggle = document.getElementById('modalRotateToggle');
            const modalZoomIn = document.getElementById('modalZoomIn');
            const modalZoomOut = document.getElementById('modalZoomOut');
            const modalPresetSelect = document.getElementById('modalPresetSelect');
            const modalCaptureBtn = document.getElementById('modalCaptureBtn');

            if (modalRotateToggle) {
                modalRotateToggle.addEventListener('click', () => {
                    if (!currentViewer) return showToast('Viewer no inicializado.', 'warning');
                    try {
                        if (currentViewer.animation && typeof currentViewer.animation.stop === 'function') {
                            if (modalRotateToggle.getAttribute('aria-pressed') === 'true') {
                                currentViewer.animation.start && currentViewer.animation.start();
                                modalRotateToggle.setAttribute('aria-pressed', 'false');
                                modalRotateToggle.textContent = 'Pausar rotaci√≥n';
                            } else {
                                currentViewer.animation.stop && currentViewer.animation.stop();
                                modalRotateToggle.setAttribute('aria-pressed', 'true');
                                modalRotateToggle.textContent = 'Reanudar rotaci√≥n';
                            }
                        } else {
                            showToast('Rotaci√≥n no disponible.', 'info');
                        }
                    } catch (e) { console.error(e); showToast('No se pudo cambiar rotaci√≥n.', 'error'); }
                });
            }

            if (modalZoomIn) modalZoomIn.addEventListener('click', () => {
                if (!currentViewer) return showToast('Viewer no inicializado.', 'warning');
                try { currentViewer.camera.position.z = Math.max(20, currentViewer.camera.position.z - 6); } catch(e){console.warn(e)}
            });

            if (modalZoomOut) modalZoomOut.addEventListener('click', () => {
                if (!currentViewer) return showToast('Viewer no inicializado.', 'warning');
                try { currentViewer.camera.position.z = Math.min(120, currentViewer.camera.position.z + 6); } catch(e){console.warn(e)}
            });

            if (modalPresetSelect) modalPresetSelect.addEventListener('change', (e) => {
                if (!currentViewer) return showToast('Viewer no inicializado.', 'warning');
                const v = e.target.value;
                try {
                    if (v === 'front') currentViewer.camera.position.set(0, 0, 45);
                    else if (v === 'threequarter') currentViewer.camera.position.set(20, 8, 50);
                    else if (v === 'close') currentViewer.camera.position.set(0, 0, 30);
                } catch (err) { console.warn(err); }
            });

            if (modalCaptureBtn) modalCaptureBtn.addEventListener('click', () => {
                if (!currentViewer) return showToast('Viewer no inicializado.', 'warning');
                try {
                    const canvas = currentViewer.renderer.domElement;
                    const data = canvas.toDataURL('image/png');
                    const a = document.createElement('a');
                    a.href = data;
                    a.download = `${currentSkinUsername || 'skin'}_render.png`;
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                    showToast('Render descargado.', 'success');
                } catch (err) { console.error(err); showToast('Error al capturar render.', 'error'); }
            });
            
            modalBackdrop.addEventListener('click', (e) => {
                if (e.target === modalBackdrop) {
                    closeModal();
                }
            });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modalBackdrop.classList.contains('active')) {
                    closeModal();
                }
            });
            
            modalContent.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    const focusableElements = modalContent.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    const first = focusableElements[0];
                    const last = focusableElements[focusableElements.length - 1];

                    if (e.shiftKey) {
                        if (document.activeElement === first) {
                            last.focus();
                            e.preventDefault();
                        }
                    } else {
                        if (document.activeElement === last) {
                            first.focus();
                            e.preventDefault();
                        }
                    }
                }
            });

            // --- Curiosidades: L√≥gica ---
            function getUniqueRandoms(sourceArray, count) {
                const pool = [...sourceArray];
                const result = [];
                while (result.length < count && pool.length) {
                    const idx = Math.floor(Math.random() * pool.length);
                    result.push(pool.splice(idx,1)[0]);
                }
                return result;
            }

            function fillCuriosityGrid(count = 3) {
                const grid = document.getElementById('curiosityGrid');
                const cards = Array.from(grid.querySelectorAll('.curiosity-card'));
                const items = getUniqueRandoms(CURIOSITY_DATA, cards.length);

                items.forEach((text, i) => {
                    const card = cards[i];
                    card.classList.remove('curiosity-loading');
                    const p = card.querySelector('.curiosity-text');
                    if (p) p.textContent = text;
                    else card.innerHTML = `<p class="curiosity-text">${text}</p>`;
                });
            }

            document.getElementById('showMoreCuriosityBtn').addEventListener('click', () => {
                fillCuriosityGrid();
                showToast('Nuevos datos curiosos cargados.', 'info');
            });

            // inicializa las 3 curiosidades
            // (se llamar√° m√°s abajo en la inicializaci√≥n)
            
            // ===== Quiz: L√≥gica =====
            const QUIZ_QUESTIONS = [
                {q: '¬øCu√°l es el material necesario para fabricar un pico de diamante?', a: ['Madera','Piedra','Diamante','Hierro'], correct: 2},
                {q: '¬øQu√© mob huye de los gatos u ocelotes?', a: ['Creeper','Esqueleto','Zombi','Enderman'], correct: 0},
                {q: '¬øC√≥mo se llama la dimensi√≥n donde vive el drag√≥n final?', a: ['El Nether','El End','La Profundidad','La Cueva'], correct: 1},
                {q: '¬øQu√© se obtiene al fundir mineral de hierro en un horno?', a: ['Lingote de hierro','Carb√≥n','Oro','Piedra'], correct: 0},
                {q: '¬øQu√© objeto evita que los Creepers exploten cerca de √©l?', a: ['Lava','Aire','Gato','Hongo'], correct: 2},
                {q: '¬øCu√°l es el nombre del creador original de Minecraft?', a: ['Notch','Jeb','Kurt','Dinnerbone'], correct: 0},
                {q: '¬øQu√© herramienta se usa para recolectar lana de una oveja sin matarla?', a: ['Tijeras','Espada','Hacha','Pico'], correct: 0},
                {q: '¬øQu√© ocurre si un aldeano es golpeado por un rayo?', a: ['Se convierte en bruja','Muere al instante','Se teletransporta','Se vuelve zombi'], correct: 0},
                {q: '¬øCu√°l es la velocidad aproximada del sprint en bloques por segundo?', a: ['4.3','5.6','3.1','6.8'], correct: 0},
                {q: '¬øQu√© objeto necesitas para encender un portal al Nether?', a: ['Fuego/Yesca','Pico de diamante','Bloque de obsidiana','Polvo de blaze'], correct: 0},
                {q: '¬øQu√© mob deja caer perlas al ser derrotado?', a: ['Enderman','Creeper','Blaze','Ghast'], correct: 0},
                {q: '¬øCu√°l de estos bloques no se encuentra naturalmente en el Nether?', a: ['Netherrack','Red Nether Brick','Prismarine','Soul Sand'], correct: 2},
                {q: '¬øQu√© necesita el jugador para domesticar un lobo?', a: ['Huesos','Carne','Manzanas','Trigo'], correct: 0},
                {q: '¬øQu√© sucede al colocar un cubo de agua en el Nether?', a: ['Se evapora','Permanece','Se convierte en hielo','Se transforma en vapor da√±ino'], correct: 0},
                {q: '¬øCu√°l es la principal fuente de experiencia al derrotar a los Blaze?', a: ['Perlas','Barras de blaze','Orbes de experiencia','Carb√≥n'], correct: 2}
            ];

            const quizStartBtn = document.getElementById('quizStartBtn');
            const quizNextBtn = document.getElementById('quizNextBtn');
            const quizQuestionEl = document.getElementById('quizQuestion');
            const quizAnswersEl = document.getElementById('quizAnswers');
            const quizTimerEl = document.getElementById('quizTimer');
            const quizProgressEl = document.getElementById('quizProgress');
            const quizResultEl = document.getElementById('quizResult');

            let quizState = { index: 0, score: 0, timeLeft: 20, running: false, selected: null, questions: [] };
            let quizTimerInterval = null;

            const QUIZ_PER_ROUND = 5; // n√∫mero de preguntas por partida (configurable)

            function startQuiz() {
                // seleccionar aleatoriamente un subconjunto de preguntas para la partida
                quizState.questions = getRandomSubset(QUIZ_QUESTIONS, QUIZ_PER_ROUND);
                quizState.index = 0; quizState.score = 0; quizState.timeLeft = 20; quizState.running = true; quizState.selected = null;
                quizStartBtn.style.display = 'none'; quizNextBtn.style.display = 'none'; quizResultEl.style.display = 'none';
                renderQuizQuestion();
                startTimer();
            }

            function startTimer() {
                clearInterval(quizTimerInterval);
                quizTimerInterval = setInterval(() => {
                    if (!quizState.running) return;
                    quizState.timeLeft -= 1;
                    quizTimerEl.textContent = `Tiempo: ${quizState.timeLeft}s`;
                    if (quizState.timeLeft <= 0) {
                        clearInterval(quizTimerInterval);
                        handleAnswer(null);
                    }
                }, 1000);
            }

            function renderQuizQuestion() {
                const q = quizState.questions[quizState.index];
                quizQuestionEl.textContent = q.q;
                quizAnswersEl.innerHTML = '';
                q.a.forEach((opt, i) => {
                    const btn = document.createElement('button');
                    btn.className = 'answer-btn';
                    btn.textContent = opt;
                    btn.dataset.index = i;
                    btn.addEventListener('click', () => handleAnswer(i));
                    quizAnswersEl.appendChild(btn);
                });
                quizProgressEl.textContent = `Pregunta ${quizState.index+1}/${quizState.questions.length}`;
                quizState.timeLeft = 20;
                quizTimerEl.textContent = `Tiempo: ${quizState.timeLeft}s`;
            }

            function handleAnswer(selectedIdx) {
                quizState.running = false;
                clearInterval(quizTimerInterval);
                const q = quizState.questions[quizState.index];

                // marcar botones correcto/incorrect
                Array.from(quizAnswersEl.children).forEach(btn => {
                    const idx = Number(btn.dataset.index);
                    if (idx === q.correct) btn.classList.add('correct');
                    if (selectedIdx !== null && idx === selectedIdx && idx !== q.correct) btn.classList.add('wrong');
                    btn.disabled = true;
                });

                if (selectedIdx === q.correct) {
                    quizState.score += 1;
                    showToast('Respuesta correcta ‚úÖ', 'success');
                } else {
                    showToast('Respuesta incorrecta ‚ùå', 'warning');
                }

                quizNextBtn.style.display = (quizState.index < quizState.questions.length - 1) ? 'inline-flex' : 'none';
                if (quizState.index >= quizState.questions.length - 1) finalizeQuiz();
            }

            quizNextBtn.addEventListener('click', () => {
                quizState.index += 1;
                quizState.running = true;
                renderQuizQuestion();
                startTimer();
                quizNextBtn.style.display = 'none';
            });

            quizStartBtn.addEventListener('click', startQuiz);

            function finalizeQuiz() {
                quizResultEl.style.display = 'block';
                const total = quizState.questions.length;
                const percent = Math.round((quizState.score / total) * 100);
                let feedback = 'Int√©ntalo de nuevo.';
                if (percent >= 80) feedback = 'Excelente ‚Äî ¬°Eres un experto!';
                else if (percent >= 60) feedback = 'Bien hecho ‚Äî Buen trabajo!';
                else if (percent >= 40) feedback = 'No est√° mal ‚Äî Sigue practicando.';

                quizResultEl.innerHTML = `<strong>Puntuaci√≥n:</strong> ${quizState.score}/${total} ‚Äî <strong>${percent}%</strong><p>${feedback}</p>`;

                // otorgar insignia si cumple condici√≥n (>=80%)
                if (percent >= 80) {
                    grantLocalBadge('Quiz Master');
                    quizResultEl.innerHTML += `<p class="badge-earned">¬°Has ganado la insignia "Quiz Master"!</p>`;
                }

                quizStartBtn.style.display = 'inline-flex';
                quizNextBtn.style.display = 'none';
            }

            // ===== Sistema simple de insignias local (localStorage) =====
            function grantLocalBadge(name) {
                const key = 'crosscraft_badges_v1';
                const stored = JSON.parse(localStorage.getItem(key) || '[]');
                if (!stored.includes(name)) {
                    stored.push(name);
                    localStorage.setItem(key, JSON.stringify(stored));
                    showToast(`Insignia obtenida: ${name}`, 'success');
                    addBadgeToCredits(name);
                }
            }

            function addBadgeToCredits(name) {
                // crear una insignia visual en #creditos
                const badges = document.querySelector('.credits-badges');
                if (!badges) return;
                const span = document.createElement('span');
                span.className = 'badge';
                span.setAttribute('tabindex','0');
                span.setAttribute('role','listitem');
                span.setAttribute('data-badge', name);
                span.textContent = 'üèÖ';
                badges.appendChild(span);
            }

            // al cargar la p√°gina, restaurar insignias locales
            (function restoreBadges() {
                const key = 'crosscraft_badges_v1';
                const stored = JSON.parse(localStorage.getItem(key) || '[]');
                stored.forEach(b => addBadgeToCredits(b));
            })();

            // Manejo t√°ctil para insignias: al tocar en m√≥vil mostrar tooltip (toggle)
            document.addEventListener('click', (e) => {
                const target = e.target.closest('.badge');
                if (!target) {
                    // ocultar tooltips visibles si clic fuera
                    document.querySelectorAll('.badge.show-tooltip').forEach(b => b.classList.remove('show-tooltip'));
                    return;
                }

                // Toggle clase que muestra el tooltip (adem√°s del hover/focus)
                if (target.classList.contains('show-tooltip')) {
                    target.classList.remove('show-tooltip');
                } else {
                    // cerrar otros
                    document.querySelectorAll('.badge.show-tooltip').forEach(b => b.classList.remove('show-tooltip'));
                    target.classList.add('show-tooltip');
                    // auto-hide despu√©s de 4s
                    setTimeout(() => target.classList.remove('show-tooltip'), 4000);
                }
            });

            // Asegurarse que focus tambi√©n muestre tooltip para accesibilidad
            document.addEventListener('focusin', (e) => {
                const b = e.target.closest('.badge');
                if (b) b.classList.add('show-tooltip');
            });
            document.addEventListener('focusout', (e) => {
                const b = e.target.closest('.badge');
                if (b) b.classList.remove('show-tooltip');
            });
            
            // --- API: Servidor Minecraft Status ---

            function cleanMotd(motd) {
                if (Array.isArray(motd)) {
                    motd = motd.join('\n');
                }
                if (!motd) return 'Sin mensaje del d√≠a (MOTD).';
                return motd.replace(/(&|¬ß)[0-9a-fk-or]/gi, '').trim();
            }

            async function fetchServerStatus() {
                const statusElement = document.getElementById('serverStatus');
                const playersElement = document.getElementById('serverPlayers');
                const pingElement = document.getElementById('serverPing');
                const versionElement = document.getElementById('serverVersion');
                const motdElement = document.getElementById('serverMotd');
                
                statusElement.innerHTML = `<span class="status-offline">Cargando...</span>`;
                
                try {
                    const response = await fetchWithTimeout(SERVER_API_URL);
                    if (!response.ok) throw new Error('Error de red o API no disponible.');
                    
                    const data = await response.json();
                    
                    if (data.online) {
                        statusElement.innerHTML = `<span class="status-online">Online</span>`;
                        playersElement.textContent = `${data.players.online}/${data.players.max}`;
                        pingElement.textContent = `${data.ping || 'N/A'} ms`;
                        versionElement.textContent = data.version || 'Desconocida';
                        motdElement.textContent = cleanMotd(data.motd.clean) || 'Servidor Online.';
                        showToast('Estado del servidor actualizado.', 'success');
                    } else {
                        throw new Error('Servidor reportado como Offline por la API.');
                    }

                } catch (error) {
                    console.error('Fallo al obtener estado del servidor:', error);
                    statusElement.innerHTML = `<span class="status-offline">Offline</span>`;
                    playersElement.textContent = '0/0';
                    pingElement.textContent = '-- ms';
                    versionElement.textContent = 'API Fall√≥';
                    motdElement.textContent = '¬°Fallo al consultar el estado del servidor! Es posible que CORS est√© bloqueando la solicitud o el servidor est√© ca√≠do. Intenta refrescar.';
                    showToast('Error al obtener el estado del servidor.', 'error');
                }
            }
            
            // Botones de Servidor
            document.getElementById('copyJavaBtn').addEventListener('click', (e) => copyToClipboard(e.target.dataset.copy));
            document.getElementById('copyBedrockBtn').addEventListener('click', (e) => copyToClipboard(e.target.dataset.copy));
            document.getElementById('refreshServerBtn').addEventListener('click', fetchServerStatus);
            document.getElementById('joinServerBtn').addEventListener('click', () => {
                window.open('minecraft://?join=51.81.49.204:26347', '_self');
                showToast('Intentando unirse al servidor...', 'info');
            });
            
            // --- API: Discord Status ---

            async function fetchDiscordStatus() {
                const discordStats = document.getElementById('discordStats');
                
                try {
                    const response = await fetchWithTimeout(DISCORD_API_URL);
                    if (!response.ok) throw new Error('Error de red o API de Discord no disponible.');
                    
                    const data = await response.json();
                    
                    if (data.approximate_member_count && data.approximate_presence_count) {
                        discordStats.innerHTML = `${data.approximate_member_count.toLocaleString()} Miembros Totales<br>${data.approximate_presence_count.toLocaleString()} Miembros Online`;
                    } else {
                        throw new Error('Datos incompletos de la API de Discord.');
                    }

                } catch (error) {
                    console.error('Fallo al obtener estado del Discord (CORS/Error de red):', error);
                    discordStats.innerHTML = 'Estad√≠sticas no disponibles (posible bloqueo CORS o error de API). ¬°√önete y compru√©balo t√∫ mismo!';
                    document.getElementById('discordInviteLink').textContent = 'Ir al Discord';
                }
            }
            
            // --- Animaci√≥n: Intersection Observer (Fade-in + Slide-up) ---

            const sections = document.querySelectorAll('.animated-section');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            // --- Inicializaci√≥n de la p√°gina ---
            generateSkinCards();
            fillCuriosityGrid();
            fetchServerStatus();
            fetchDiscordStatus();

            // ===== Galer√≠a: integraci√≥n con backend =====
            const galleryGrid = document.getElementById('galleryGrid');
            const uploadBtn = document.getElementById('uploadBtn');
            const uploadFile = document.getElementById('uploadFile');
            const uploadAuthor = document.getElementById('uploadAuthor');
            const uploadCaption = document.getElementById('uploadCaption');
            const adminToggleBtn = document.getElementById('adminToggleBtn');

            let adminAuthHeader = null; // 'Basic ...' si admin autenticado en la sesi√≥n

            async function loadGallery() {
                try {
                    const res = await fetch('/api/gallery');
                    const items = await res.json();
                    galleryGrid.innerHTML = '';
                    items.forEach(it => {
                        const card = document.createElement('div');
                        card.className = 'curiosity-card';

                        // Mostrar metadatos si el admin est√° autenticado en esta sesi√≥n
                        const metaHtml = adminAuthHeader ? `<div style="margin-top:6px; color:var(--color-text-muted); font-size:0.82rem;">ID: ${it.id} ¬∑ file: ${escapeHtml(it.url.split('/').pop())} ¬∑ subido: ${escapeHtml(it.uploaded_at || '')}</div>` : '';

                        card.innerHTML = `
                            <div style="width:100%; display:flex; flex-direction:column; gap:0.5rem;">
                                <img src="${it.url}" alt="${escapeHtml(it.caption || it.originalname)}" style="width:100%; border-radius:8px; max-height:360px; object-fit:cover;">
                                <div style="display:flex; justify-content:space-between; align-items:center; gap:0.5rem;">
                                    <div style="flex:1">
                                        <strong style="display:block; color:var(--color-text-light);">${escapeHtml(it.author || 'An√≥nimo')}</strong>
                                        <small style="color:var(--color-text-muted);">${escapeHtml(it.caption || '')}</small>
                                        ${metaHtml}
                                    </div>
                                    <div class="gallery-actions" data-id="${it.id}"></div>
                                </div>
                            </div>`;
                        galleryGrid.appendChild(card);
                    });
                } catch (e) {
                    console.error('Error cargando galer√≠a', e);
                }
            }

            function escapeHtml(s) {
                if (!s) return '';
                return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            }

            uploadBtn.addEventListener('click', async () => {
                const file = uploadFile.files[0];
                if (!file) return showToast('Selecciona una imagen para subir.', 'warning');
                const form = new FormData();
                form.append('image', file);
                form.append('caption', uploadCaption.value || '');
                form.append('author', uploadAuthor.value || '');

                try {
                    const res = await fetch('/api/upload', { method: 'POST', body: form });
                    let data = null;
                    try { data = await res.json(); } catch(e) { data = null; }
                    if (res.ok && data && data.success) {
                        showToast('Imagen subida correctamente.', 'success');
                        uploadFile.value = '';
                        uploadCaption.value = '';
                        uploadAuthor.value = '';
                        loadGallery();
                    } else {
                        const errMsg = data && data.error ? data.error : `Status ${res.status}`;
                        showToast('Error al subir: ' + errMsg, 'error');
                        console.error('Upload response:', res.status, data);
                    }
                } catch (err) {
                    console.error('Upload failed', err);
                    showToast('Fallo al conectar con el servidor de la galer√≠a.', 'error');
                }
            });

            // Panel admin simple: solicita usuario/clave y a√±ade botones de borrar
            adminToggleBtn.addEventListener('click', async () => {
                const user = prompt('Admin user:');
                if (user === null) return;
                const pass = prompt('Admin password:');
                if (pass === null) return;
                adminAuthHeader = 'Basic ' + btoa(`${user}:${pass}`);
                // intentar listar y habilitar botones
                try {
                    await loadGallery();
                    enableAdminControls();
                    showToast('Panel admin habilitado en esta sesi√≥n.', 'info');
                } catch (e) {
                    showToast('No se pudo activar el panel admin.', 'error');
                }
            });

            function enableAdminControls() {
                document.querySelectorAll('.gallery-actions').forEach(container => {
                    container.innerHTML = '';
                    const id = container.getAttribute('data-id');
                    const del = document.createElement('button');
                    del.className = 'btn btn-secondary';
                    del.textContent = 'Eliminar';
                    del.addEventListener('click', async () => {
                        if (!adminAuthHeader) return alert('No autenticado.');
                        if (!confirm('¬øEliminar imagen permanentemente?')) return;
                        try {
                            const res = await fetch(`/api/image/${id}`, { method: 'DELETE', headers: { 'Authorization': adminAuthHeader } });
                            const data = await res.json();
                            if (res.ok && data.success) {
                                showToast('Imagen eliminada.', 'success');
                                loadGallery();
                            } else {
                                showToast('Error borrando: ' + (data.error || 'error'), 'error');
                            }
                        } catch (err) {
                            console.error(err);
                            showToast('Fallo al conectar con backend.', 'error');
                        }
                    });
                    container.appendChild(del);
                });
            }

            // cargar galer√≠a al inicio
            loadGallery();
        });
    </script>

</body>
</html>